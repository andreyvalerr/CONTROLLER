# ๐ก๏ธ Whatsminer Liquid Temperature Monitor

## ๐ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

ะญัะพั ะฟัะพะตะบั ะดะตะผะพะฝัััะธััะตั ััะฟะตัะฝะพะต ะฟะพะปััะตะฝะธะต ัะตะผะฟะตัะฐัััั ะถะธะดะบะพััะธ ั ะผะฐะนะฝะตัะฐ **Whatsminer M64_VL40** ั ะถะธะดะบะพััะฝัะผ ะพัะปะฐะถะดะตะฝะธะตะผ ัะตัะตะท **API v3.0.1**.

## ๐ฏ ะะตะทัะปััะฐัั

โ **ะฃะกะะะจะะ ะะะะฃะงะะะ ะขะะะะะะะขะฃะะ ะะะะะะกะขะ: 49.6ยฐC**

### ๐ ะะพะปััะตะฝะฝัะต ะดะฐะฝะฝัะต:
- **๐ง ะขะตะผะฟะตัะฐัััะฐ ะถะธะดะบะพััะธ:** `49.6ยฐC` (ะพัะปะธัะฝัะน ะฟะพะบะฐะทะฐัะตะปั)
- **๐ฅ ะขะตะผะฟะตัะฐัััะฐ ะะ:** `55.9ยฐC` (ะฒ ะฝะพัะผะต)
- **๐ช๏ธ ะกะบะพัะพััั ะฒะตะฝัะธะปััะพัะฐ:** `49.6%` (ะพะฟัะธะผะฐะปัะฝะฐั)
- **๐ ะะพัะฝะพััั:** `4144W`
- **โก ะะฐะฟััะถะตะฝะธะต:** `230.75V`

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
๐ฆ new_controller/
โโโ ๐ get_temperature.py          # ะะฐะทะพะฒัะน ัะบัะธะฟั ะฟะพะปััะตะฝะธั ัะตะผะฟะตัะฐัััั
โโโ ๐ get_temperature_v2.py       # ะะฐััะธัะตะฝะฝัะน ัะบะฐะฝะตั API ะบะพะผะฐะฝะด
โโโ ๐ liquid_temp_monitor.py      # ะคะธะฝะฐะปัะฝัะน ะผะพะฝะธัะพั ัะตะผะฟะตัะฐัััั
โโโ ๐ WHATSMINER_API_GUIDE.md     # ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ API
โโโ ๐ TECHNICAL_DIAGRAMS.md       # ะขะตัะฝะธัะตัะบะธะต ััะตะผั ะธ ะดะธะฐะณัะฐะผะผั
โโโ ๐ README.md                   # ะญัะพั ัะฐะนะป
โโโ ๐ 1729070366369python-whatsminer-api-3.0.0/  # ะะธะฑะปะธะพัะตะบะฐ API
    โโโ whatsminer_interface.py
    โโโ whatsminer_trans.py
    โโโ whatsminer.py
```

## ๐ ะัััััะน ััะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
```bash
pip install passlib pycryptodome
```

### 2. ะัะพััะพะต ะฟะพะปััะตะฝะธะต ัะตะผะฟะตัะฐัััั
```bash
python liquid_temp_monitor.py
```

### 3. ะะพะปะฝัะน ะฐะฝะฐะปะธะท API
```bash
python get_temperature_v2.py
```

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะฐัะฐะผะตััั ะฟะพะดะบะปััะตะฝะธั:
- **IP ะฐะดัะตั:** `192.168.0.91`
- **ะะพัั:** `4433`
- **ะะบะบะฐัะฝั:** `super`
- **ะะฐัะพะปั:** `super`
- **API ะฒะตััะธั:** `3.0.1`

### ะะปััะตะฒะฐั ะบะพะผะฐะฝะดะฐ API:
```json
{
    "cmd": "get.device.info",
    "param": null
}
```

### ะััั ะบ ะดะฐะฝะฝัะผ ัะตะผะฟะตัะฐัััั:
```python
liquid_temp = response['msg']['power']['liquid-temperature']
```

## ๐ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
Python Client โโTCP/IPโโโบ Whatsminer M64_VL40
     โ                         โ
     โ                    โโโโโโผโโโโโ
     โ                    โ API v3  โ
     โ                    โโโโโโฌโโโโโ
     โ                         โ
     โ                    โโโโโโผโโโโโ
     โ                    โSensors  โ
     โ                    โโโโโโฌโโโโโ
     โ                         โ
     โโโโโโJSON Responseโโโโโโโโ
       liquid-temperature: 49.6ยฐC
```

## ๐ก๏ธ ะะพะณะธะบะฐ ะฟะพะปััะตะฝะธั ัะตะผะฟะตัะฐัััั

### ะจะฐะณ 1: ะะพะดะบะปััะตะฝะธะต
```python
whatsminer_tcp = WhatsminerTCP(ip, 4433, "super", "super")
whatsminer_tcp.connect()
```

### ะจะฐะณ 2: ะััะตะฝัะธัะธะบะฐัะธั
```python
req = whatsminer_api.get_request_cmds("get.device.info")
resp = whatsminer_tcp.send(req, len(req))
salt = resp['msg']['salt']
whatsminer_api.set_salt(salt)
```

### ะจะฐะณ 3: ะะทะฒะปะตัะตะฝะธะต ะดะฐะฝะฝัั
```python
power_info = resp['msg']['power']
liquid_temp = power_info['liquid-temperature']  # 49.6ยฐC
psu_temp = power_info['temp0']                  # 55.9ยฐC
fan_speed = power_info['fanspeed']              # 49.6%
```

## ๐ก ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

### โ ะัะตะธะผััะตััะฒะฐ:
- **ะััะผะพะน ะดะพัััะฟ** ะบ ัะตะผะฟะตัะฐัััะต ะถะธะดะบะพััะธ
- **ะัััััะน ะพัะบะปะธะบ** (< 1 ัะตะบัะฝะดั)
- **ะะฐะดะตะถะฝะฐั ะฐััะตะฝัะธัะธะบะฐัะธั** ัะตัะตะท salt
- **ะะธะฝะธะผะฐะปัะฝะฐั ะฝะฐะณััะทะบะฐ** ะฝะฐ ะผะฐะนะฝะตั
- **ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะดะฐะฝะฝัะต** (ะะ, ะฒะตะฝัะธะปััะพัั, ะผะพัะฝะพััั)

### ๐ ะะตะทะพะฟะฐัะฝะพััั:
- AES ัะธััะพะฒะฐะฝะธะต ะบะพะผะฐะฝะด
- Salt-based ะฐััะตะฝัะธัะธะบะฐัะธั
- ะะฐัะธัะตะฝะฝะพะต TCP ัะพะตะดะธะฝะตะฝะธะต

### ๐ ะะพะฝะธัะพัะธะฝะณ:
- ะะตะฐะปัะฝะพะต ะฒัะตะผั
- ะััะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั
- ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- ะะพะณะธัะพะฒะฐะฝะธะต

## ๐ฏ ะัะธะผะตะฝะตะฝะธะต ะฒ ะฟัะพะตะบัะฐั

### ๐ญ ะัะพะผััะปะตะฝะฝัะน ะผะพะฝะธัะพัะธะฝะณ
```python
# ะะตะฟัะตััะฒะฝัะน ะผะพะฝะธัะพัะธะฝะณ ะดะปั ะดะฐัะฐ-ัะตะฝััะฐ
monitor = WhatsminerTemperatureMonitor("192.168.0.91")
while True:
    temp = monitor.get_liquid_temperature()
    if temp > 60:
        send_alert("ะัะธัะธัะตัะบะฐั ัะตะผะฟะตัะฐัััะฐ!")
    time.sleep(30)
```

### ๐ ะกะธััะตะผะฐ ะฐะฝะฐะปะธัะธะบะธ
```python
# ะกะฑะพั ะดะฐะฝะฝัั ะดะปั ะฐะฝะฐะปะธะทะฐ
temperatures = []
for hour in range(24):
    temp = get_liquid_temperature("192.168.0.91")
    temperatures.append({
        'time': datetime.now(),
        'temperature': temp
    })
    time.sleep(3600)  # ะะฐะถะดัะน ัะฐั
```

### โ๏ธ ะกะธััะตะผะฐ ะฟัะตะดัะฟัะตะถะดะตะฝะธะน
```python
# ะะฒัะพะผะฐัะธัะตัะบะธะต ัะฒะตะดะพะผะปะตะฝะธั
def check_temperature():
    temp = get_liquid_temperature("192.168.0.91")
    if temp > 55:
        send_email("ะะพะฒััะตะฝะฝะฐั ัะตะผะฟะตัะฐัััะฐ: {}ยฐC".format(temp))
    elif temp > 60:
        send_sms("ะะะะขะะงะะ! ะขะตะผะฟะตัะฐัััะฐ: {}ยฐC".format(temp))
```

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- **[WHATSMINER_API_GUIDE.md](WHATSMINER_API_GUIDE.md)** - ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ API
- **[TECHNICAL_DIAGRAMS.md](TECHNICAL_DIAGRAMS.md)** - ะขะตัะฝะธัะตัะบะธะต ััะตะผั ะธ ะดะธะฐะณัะฐะผะผั

## ๐ ะะธะฐะณะฝะพััะธะบะฐ

### ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ:
```bash
telnet 192.168.0.91 4433
```

### ะัะปะฐะดะบะฐ:
```python
# ะะบะปััะธัั ะฟะพะดัะพะฑะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต
import logging
logging.basicConfig(level=logging.DEBUG)
```

## ๐ ะะฐะบะปััะตะฝะธะต

ะัะพะตะบั ััะฟะตัะฝะพ ะดะตะผะพะฝัััะธััะตั:

1. **โ ะะพะดะบะปััะตะฝะธะต ะบ Whatsminer API v3.0.1**
2. **โ ะะพะปััะตะฝะธะต ัะตะผะฟะตัะฐัััั ะถะธะดะบะพััะธ (49.6ยฐC)**
3. **โ ะะฐะดะตะถะฝัั ะฐััะตะฝัะธัะธะบะฐัะธั ะธ ัะธััะพะฒะฐะฝะธะต**
4. **โ ะะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ ะธ ะผะพะฝะธัะพัะธะฝะณ**
5. **โ ะะพัะพะฒัะต ัะตัะตะฝะธั ะดะปั ะฟัะพะผััะปะตะฝะฝะพะณะพ ะฟัะธะผะตะฝะตะฝะธั**

ะขะตะผะฟะตัะฐัััะฐ ะถะธะดะบะพััะธ **49.6ยฐC** - ะพัะปะธัะฝัะน ะฟะพะบะฐะทะฐัะตะปั ะดะปั ะผะฐะนะฝะตัะฐ ะฟะพะด ะฝะฐะณััะทะบะพะน, ััะพ ะฟะพะดัะฒะตัะถะดะฐะตั ัััะตะบัะธะฒะฝะพััั ัะธััะตะผั ะถะธะดะบะพััะฝะพะณะพ ะพัะปะฐะถะดะตะฝะธั.

---

**ะะฒัะพั:** AI Assistant  
**ะะฐัะฐ:** 2025-05-28  
**ะะตััะธั:** 1.0  
**ะกัะฐััั:** โ ะฃัะฟะตัะฝะพ ะทะฐะฒะตััะตะฝะพ 